import{T as x,P as y,A as _}from"./index-urWe5QQ5.js";import{L as d}from"./layout-CENlK1iF.js";import{d as T,h as f,i as B,c as E,a as u,F as L,o as C}from"./index-D51gfSC5.js";class F{static jitter(l,a){return l.map(n=>n+(Math.random()*2-1)*a)}static extract(l,a){let n=l.length,t=0,i=[];for(;t<=n;)i.push(l[t]),t+=a;return i}}const $=T({__name:"line-waves",setup(m){const l=f(),a=f();return B(()=>{let n=new x(l.value),t=new y(a.value,{trace:.97}),i=new _(()=>{let c=F.extract(n.get(),3),g=c.length,o=Math.floor(g/3),s=c.slice(0,o);for(let e=0;e<s.length;e++)s[e]=1-s[e]*.8;let h=c.slice(o,o*2);for(let e=0;e<h.length;e++)h[e]=1-h[e]*.8;let r=c.slice(o*2,Math.floor(o*2+o/2)).reverse();r.push(0);for(let e=0;e<r.length;e++)r[e]=1-Math.sqrt(r[e])*.8;let p=d.linear(s,t.width,t.height),w=d.linear(h,t.width,t.height),v=d.linear(r,t.width,t.height);t.update(e=>{e.context.fillStyle="#87BBEB77",e.drawCurve(v),e.context.lineTo(t.width,t.height),e.context.lineTo(0,t.height),e.context.fill(),e.context.fillStyle="#86EBCC77",e.drawCurve(p),e.context.lineTo(t.width,t.height),e.context.lineTo(0,t.height),e.context.fill(),e.context.fillStyle="#6EDEEB77",e.drawCurve(w),e.context.lineTo(t.width,t.height),e.context.lineTo(0,t.height),e.context.fill()})});l.value.addEventListener("play",()=>{i.play()}),l.value.addEventListener("pause",()=>{i.pause()})}),(n,t)=>(C(),E(L,null,[u("canvas",{ref_key:"$canvas",ref:a,style:{width:"100vw",height:"100vh"}},null,512),u("audio",{ref_key:"$audio",ref:l,style:{position:"fixed",left:"50%",bottom:"20px",transform:"translateX(-50%)"},src:"/music-visualization-resource/This is Water.ogg",controls:"",volume:"0.5",preload:"auto"},null,512)],64))}});export{$ as default};
